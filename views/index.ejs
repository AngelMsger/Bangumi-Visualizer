<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="theme-color" content="#448aff" />
        <title>Bangumi</title>
        <link href="https://cdn.bootcss.com/vue-material/1.0.0-beta-8/vue-material.min.css" rel="stylesheet" />
        <link href="https://cdn.bootcss.com/vue-material/1.0.0-beta-8/theme/default.css" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic|Material+Icons">
        <link rel='stylesheet' href='/stylesheets/bangumi.css' />
    </head>
    <body>
    <div id="app">
        <div class="page-container">
            <md-app md-mode="reveal" style="min-height: 100vh;">
                <md-app-toolbar class="md-primary">
                    <md-button class="md-icon-button" @click="menuVisible = !menuVisible">
                        <md-icon>menu</md-icon>
                    </md-button>
                    <span class="md-title">Bangumi</span>
                </md-app-toolbar>
                <md-app-drawer :md-active.sync="menuVisible" class="md-scrollbar">
                    <md-toolbar class="md-transparent" md-elevation="0">
                        <span class="md-title">Bangumi</span>
                    </md-toolbar>

                    <md-list>
                        <md-list-item @click="page = 0">
                            <md-icon>move_to_inbox</md-icon>
                            <span class="md-list-item-text">番剧</span>
                        </md-list-item>
                        <md-list-item @click="page = 1">
                            <md-icon>send</md-icon>
                            <span class="md-list-item-text">用户</span>
                        </md-list-item>
                        <md-list-item>
                            <md-icon>delete</md-icon>
                            <span class="md-list-item-text">作者</span>
                        </md-list-item>
                    </md-list>
                </md-app-drawer>
                <md-app-content class="md-scrollbar">
                    <div v-if="page === 0">
                        <md-field>
                            <label>Season ID</label>
                            <md-input v-model="season_id"></md-input>
                            <span class="md-helper-text">番剧编号</span>
                        </md-field>
                        <div v-if="anime.success">
                            <div class="md-layout md-gutter">
                                <div class="bangumi-content">
                                    <span class="md-display-2">{{ anime.title }}</span>
                                    <div>
                                        <span class="md-caption">{{ anime.alias }}</span>
                                    </div>
                                    <div>
                                        <md-chip v-for="area in anime.area" :key="area" class="md-accent">{{ area }}</md-chip>
                                        <md-chip v-for="tag in anime.tags" :key="tag" class="md-primary">{{ tag }}</md-chip>
                                    </div>
                                </div>
                                <div class="bangumi-content">
                                    <div v-if="anime.rating">
                                        <span class="md-display-2">{{ anime.rating.score }}</span>
                                        <span >来自 {{ anime.rating.count }} 位用户</span>
                                    </div>
                                    <span>共 {{ anime.episodes }} 集</span>
                                    <span v-if="anime.is_finish">已完结</span>
                                    <span v-else>连载中</span>
                                    <span>弹幕数量：{{ anime.danmaku_count }}</span>
                                    <span>{{ anime.favorites }} 人追番</span>
                                    <span>发布时间：{{ anime.pub_time }}</span>
                                </div>
                            </div>
                            <div class="bangumi-content md-layout md-gutter">
                                <span>简介</span>
                                <p>{{ anime.evaluate }}</p>
                            </div>
                            <div v-if="anime.top_matches" class="md-layout md-gutter md-alignment-top-center">
                                <md-card md-with-hover v-for="other in anime.top_matches" class="md-layout-item md-medium-size-96 md-large-size-24">
                                    <md-ripple>
                                        <md-card-header>
                                            <div class="md-title">{{ other.title }}</div>
                                            <div v-if="other.rating" class="md-subhead">{{ other.rating.score }}</div>
                                        </md-card-header>

                                        <md-card-content>
                                            {{ other.evaluate | filter_slice }}
                                        </md-card-content>

                                        <md-card-actions>
                                            <md-button @click="applyAnime(other.season_id)">查看详情</md-button>
                                        </md-card-actions>
                                    </md-ripple>
                                </md-card>
                            </div>
                        </div>
                        <div v-else class="bangumi-placeholder"></div>
                    </div>

                    <div v-if="page === 1" class="md-layout md-gutter">
                        <md-field>
                            <label>MID</label>
                            <md-input v-model="season_id"></md-input>
                            <span class="md-helper-text">用户编号</span>
                        </md-field>
                        <div v-if="author.success" class="md-layout md-gutter">

                        </div>
                    </div>

                    <div v-if="page === 2" class="md-layout md-gutter">
                        <div class="bangumi-content">
                            <span class="md-display-2">{{ author.uname }}</span>
                        </div>
                        <div class="bangumi-content">
                            <div>
                                <span>最后爬取时间：{{ anime.last_crawl }}</span>
                            </div>
                            <div>
                                <span>最后计算时间：{{ anime.last_analyze }}</span>
                            </div>
                        </div>
                    </div>
                </md-app-content>
            </md-app>
        </div>
    </div>
        <script src="https://cdn.bootcss.com/vue/2.5.15/vue.min.js"></script>
        <script src="https://cdn.bootcss.com/vue-resource/1.5.0/vue-resource.min.js"></script>
        <script src="https://cdn.bootcss.com/vue-material/1.0.0-beta-8/vue-material.min.js"></script>
        <script src="/javascripts/bangumi.js"></script>
    </body>
</html>
